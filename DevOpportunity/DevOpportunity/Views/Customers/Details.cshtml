@model DevOpportunity.Models.Pagination<DevOpportunity.Orders>
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

@{
    ViewBag.Title = "Orders";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Orders.</h2>

<table class="table table-striped table-hover table-responsive">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().OrderDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().RequiredDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().ShippedDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().Freight)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().ShipName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().ShipAddress)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().ShipCity)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().ShipRegion)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().ShipPostalCode)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().ShipCountry)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().Customers.CompanyName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().Employees.LastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items.FirstOrDefault().ShipVia)
        </th>
    </tr>

@foreach (var item in Model.Items) {
    <tr style="cursor:pointer" onclick="location.href = '@(Url.Action("Details", "Orders", new { id=item.OrderID}))'">
        <td>
            @Html.DisplayFor(modelItem => item.OrderDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RequiredDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ShippedDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Freight)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ShipName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ShipAddress)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ShipCity)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ShipRegion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ShipPostalCode)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ShipCountry)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Customers.CompanyName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Employees.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Shippers.CompanyName)
        </td>
    </tr>
}

</table>
<br />

@if (Model.Pager.EndPage > 1)
{
    <ul class="pagination">
        @if (Model.Pager.CurrentPage > 1)
        {
            <li>
                <a href="~/Customers/Details?id=@ViewBag.CustomerID">First</a>
            </li>
            <li>
                <a href="~/Customers/Details?page=@(Model.Pager.CurrentPage - 1)&id=@ViewBag.CustomerID">Previous</a>
            </li>
        }

        @for (var page = Model.Pager.StartPage; page <= Model.Pager.EndPage; page++)
        {
            <li class="@(page == Model.Pager.CurrentPage ? "active" : "")">
                <a href="~/Customers/Details?page=@page&id=@ViewBag.CustomerID">@page</a>
            </li>    }

        @if (Model.Pager.CurrentPage < Model.Pager.TotalPages)
        {
            <li>
                <a href="~/Customers/Details?page=@(Model.Pager.CurrentPage + 1)&id=@ViewBag.CustomerID">Next</a>
            </li>
            <li>
                <a href="~/Customers/Details?page=@(Model.Pager.TotalPages)&id=@ViewBag.CustomerID">Last</a>
            </li>
        }
    </ul>
}
